<% include ./partials/head %>
<body class="">
  <div class="wrapper">
    <% include ./partials/sidebar %>
    <div class="main-panel">
      <!-- Navbar -->
      <% include ./partials/navbar %>
      <!-- End Navbar -->
      <div class="content">
        <div class="container-fluid">
          <div class="row">
            <div class="col-md-12">
              <div class="card">
                <div class="card-header card-header-primary card-header-icon">
                  <div class="card-icon">
                    <i class="material-icons">assignment</i>
                  </div>
                  <h4 class="card-title">Students</h4>
                </div>
                <div class="card-body">
                  <div class="toolbar">
                    <!-- Here you can write extra buttons/actions for the toolbar -->
                  </div>
                  <% if(users.length > 0) { %>
                  <div class="material-datatables">
                    <table id="datatable" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">
                      <thead>
                        <tr>
                          <th>Name</th>
                          <th>Email</th>
                          <th class="disabled-sorting">Skills</th>
                          <th class="disabled-sorting text-right">Actions</th>
                        </tr>
                      </thead>
                      <tfoot>
                        <tr>
                          <th>Name</th>
                          <th>Email</th>
                          <th>Skills</th>
                          <th class="text-right">Actions</th>
                        </tr>
                      </tfoot>
                      <tbody>
                        <% for (let user of users) { %>
                        <tr>
                          <td><%= user.firstName + ' ' + user.lastName %></td>
                          <td><%= user.email %></td>
                          <td>
                            <% if(user.skills.length > 0) { %>
                              <% for (let skill of user.skills) { %>
                                <div class="progress-container progress-primary">
                                  <span class="progress-badge"><%= skill.name %></span>
                                  <div class="progress">
                                    <div class="progress-bar progress-bar-primary" role="progressbar" aria-valuenow="<%= skill.skillLevel %>" aria-valuemin="0" aria-valuemax="100" style="width: <%= skill.skillLevel %>%;">
                                    </div>
                                  </div>
                                </div>
                              <% } %>
                            <% } else { %>
                              N/A
                            <% } %>
                          </td>
                          <td class="text-right">
                            <button class="btn btn-link btn-just-icon" data-toggle="modal" data-target="#<%= user._id %>">
                              <i class="material-icons">assignment_ind</i>
                              <div class="ripple-container"></div>
                            </button>
                            <a href="#" class="btn btn-link btn-warning btn-just-icon edit"><i class="material-icons">dvr</i></a>
                            <a href="#" class="btn btn-link btn-danger btn-just-icon remove"><i class="material-icons">close</i></a>
                          </td>
                        </tr>
                        <% } %>
                      </tbody>
                    </table>
                  </div>
                  <% } else { %>
                    <h4>No users found</h4>
                  <% } %>
                </div>
                <!-- end content-->
              </div>
              <!--  end card  -->
            </div>
            <!-- end col-md-12 -->
          </div>
          <!-- end row -->
        </div>
      </div>
      <% include ./partials/footer %>
    </div>
  </div>
  <% include ./partials/optionsPanel %>
  <% if(users.length > 0) { %>
  <% for (let user of users) { %>
  <div class="modal fade" id="<%= user._id %>" tabindex="-1" role="dialog" aria-labelledby="<%= user._id %>Label" style="display: none;" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">Quick review</h4>
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
            <i class="material-icons">clear</i>
          </button>
        </div>
        <div class="modal-body">
          <h4 class="card-title"><%= user.firstName + ' ' + user.lastName%></h4>
          <div class="card-body">
            <% if(user.skills.length > 0) { %>
              <div class="table-responsive">
                <table class="table">
                  <thead class=" text-primary">
                    <tr>
                      <th>Skill</th>
                      <th>Level</th>
                    </tr>
                  </thead>
                  <tbody>
                  <% for (let skill of user.skills) { %>
                  <tr>
                    <td><%= skill.name %></td>
                    <td>
                      <div class="progress-container progress-primary">
                        <div class="progress">
                          <div class="progress-bar progress-bar-primary" role="progressbar" aria-valuenow="<%= skill.skillLevel %>" aria-valuemin="0" aria-valuemax="100" style="width: <%= skill.skillLevel %>%;">
                          </div>
                        </div>
                      </div>
                    </td>
                  </tr>
                  <% } %>
                </tbody>
              </table>
            </div>
            <% } else { %>
              <p>No skills are confirmed yet</p>
            <% } %>
          </div>
          <div class="form-group bmd-form-group is-filled">
            <label class="label-control bmd-label-static">Interview Date</label>
            <input type="text" class="form-control datetimepicker" value="">
            <span class="material-input"></span>
            <span class="material-input"></span>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-link">Send invite</button>
          <button type="button" class="btn btn-danger btn-link" data-dismiss="modal">Close<div class="ripple-container"><div class="ripple-decorator ripple-on ripple-out" style="left: 43.0781px; top: 22px; background-color: rgb(244, 67, 54); transform: scale(8.50976);"></div><div class="ripple-decorator ripple-on ripple-out" style="left: 43.0781px; top: 22px; background-color: rgb(244, 67, 54); transform: scale(8.50976);"></div></div></button>
        </div>
      </div>
    </div>
  </div>
  <% } %>
  <% } %>
  <% include ./partials/scripts %>
  <script>
    $(document).ready(function() {
      //init DateTimePickers
      md.initFormExtendedDatetimepickers();
    });
  </script>
</body>

</html>